<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Volcanic clouds</title>

		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.conditional.min.css">

		<style>
			#statusContainer {
				position: absolute;
				display: none;
				bottom: 0;
				padding: 5px;
				margin: 5px;
			}
			button {
				margin: 0px; padding: 0px;
			}
		</style>

		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="shortcut icon" href="favicon.svg" type="image/svg">

	</head>
	<body style="margin: 0">
		<div id="fileUploadContainer" class="pico container-fluid" style="position: absolute;">
			<article
			data-tooltip="Browse and select a scan or traverse data file to load"
			data-placement="bottom">
				<fieldset class="grid">
					<h1>Volcanic cloud viewer</h1>
				</fieldset>
				<fieldset class="grid">
					<label>
						Completeness limit
						<input id="completenessLimit" type="number" value=0.9 step=0.1 placeholder="0.9"/>
					</label>
					<label>
						Baricenter limit
						<input id="baricenterLimit" type="number" value=60 placeholder="60"/>
					</label>
					<label>
						Time difference (minutes)
						<input id="timeDifferenceMin" type="number" value=15 placeholder="15"/>
					</label>
				</fieldset>
				<small>
					Note that the settings above are used if you only supply evaluation log files, but will not be used if you also supply CSV concentration data.
				</small>

				<label for="fileInput">Upload data here:
					<input type="file" id="fileInput" accept=".txt, .csv" multiple/>
				</label>
				The visualisation needs Evaluation log text files and the csv produced by the tomoInverse.m Matlab script.<br>
				Use ctrl to select multiple files.

			</article>
			<article>When the visualisation has loaded, use keyboard arrows to step between timeframes.</article>
			<progress/ id="progress">
		</div>

		<article class="pico" id="statusContainer">
			<div role="group" style="display: flex; background: #ffffff91; color: #000000c2;">
				<button id="prevFrame">&lt;</button>
				<div style="margin: 1em;" id="statusText"></div>
				<button id="nextFrame">&gt;</button>
			  </div>
		</article>

		<div id="container"></div>

		<!-- Import maps polyfill -->
		<!-- Remove this when import maps will be widely supported -->
		<script async src="https://unpkg.com/es-module-shims@1.3.6/dist/es-module-shims.js"></script>

		<script type="importmap">
			{
				"imports": {
					"three": "./libs/three.module.js"
				}
			}
		</script>

		<script src="libs/mathjs.js"></script>
		<script type="module" src="main.js"></script>
	</body>
</html>
